var Zeroseven;(Zeroseven2=>{const dataAttributes={loading:"loading"},getMap=(replaceSelectors,appendSelectors,doc)=>({replace:replaceSelectors.map(selector=>(doc||document).querySelector(selector)).filter(element=>element),append:appendSelectors.map(selector=>(doc||document).querySelector(selector)).filter(element=>element)}),getSourceNodes=async(url,replaceSelectors,appendSelectors)=>await fetch(url).then(response=>response.ok?response.text():Promise.reject(response)).then(markup=>getMap(replaceSelectors,appendSelectors,new DOMParser().parseFromString(markup,"text/html"))),replaceHistory=url=>url&&window.history.replaceState(null,"",url),disableLink=link=>{"disabled"in link&&(link.disabled=!0),"href"in link&&(link.href="javascript:void(0)"),link.removeAttribute("onclick"),link.style.pointerEvents="none",link.dataset[dataAttributes.loading]="true"},updateLoadingState=(map,state)=>Object.keys(map).forEach(key=>{map[key].forEach(element=>state?element.dataset[dataAttributes.loading]="true":delete element.dataset[dataAttributes.loading])}),triggerEvent=(action,parameter)=>{let event,name="pagebased:pagination:"+action;typeof window.CustomEvent=="function"?event=new CustomEvent(name,{detail:parameter||{}}):(event=document.createEvent("CustomEvent"),event.initCustomEvent(name,!0,!0,parameter||{})),document.dispatchEvent(event)},load=(url,replaceSelectors,appendSelectors,e)=>{if("fetch"in window&&"Promise"in window){const event=e||window.event,link=event.target,originalUrl=link.dataset.url||("href"in link?link.href:""),target=getMap(replaceSelectors,appendSelectors);event&&event.preventDefault(),updateLoadingState(target,!0),disableLink(link),triggerEvent("start",{target,link,url:originalUrl}),getSourceNodes(url,replaceSelectors,appendSelectors).then(source=>{triggerEvent("loaded",{target,source,link});const replaced=[],appended=[];target.replace.forEach((element,index)=>{replaced.push(source.replace[index]),element.replaceWith(source.replace[index])}),target.append.forEach((element,index)=>{Array.prototype.slice.call(source.append[index].children).forEach(child=>{appended.push(element.appendChild(child))})}),replaceHistory(originalUrl),updateLoadingState(target,!1),triggerEvent("complete",{replaced,appended,target,link})}).catch(()=>confirm(`Oops, an error occurred!
Do you want to try again?`)&&(window.location.href=originalUrl))}};Zeroseven2.Pagebased={Pagination:{load}}})(Zeroseven||(Zeroseven={}));
